(function() {
  var Range, Ripper, expectEqualRefs, expectNoRefs, inspect,
    __slice = [].slice;

  Ripper = require('../lib/js_refactor').Ripper;

  Range = require('atom').Range;

  inspect = require('util').inspect;

  expectNoRefs = function(ripper, range) {
    var resultRanges;
    resultRanges = ripper.find(range);
    return expect(resultRanges).toHaveLength(0);
  };

  expectEqualRefs = function() {
    var i, ranges, resultRange, resultRanges, ripper, _i, _len, _results;
    ripper = arguments[0], ranges = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    resultRanges = ripper.find(ranges[0].start);
    ranges.sort(function(a, b) {
      var delta;
      if ((delta = a.start.row - b.start.row) !== 0) {
        return delta;
      }
      return a.start.column - b.start.column;
    });
    expect(resultRanges).toHaveLength(ranges.length);
    _results = [];
    for (i = _i = 0, _len = resultRanges.length; _i < _len; i = ++_i) {
      resultRange = resultRanges[i];
      _results.push(expect(resultRange).toEqual(ranges[i]));
    }
    return _results;
  };

  describe('Ripper', function() {
    var ripper;
    ripper = new Ripper;
    it('should find refs in LF', function() {
      ripper.parse("var a;\na = 100;");
      expectEqualRefs(ripper, new Range([0, 4], [0, 5]), new Range([1, 0], [1, 1]));
      return expectEqualRefs(ripper, new Range([1, 0], [1, 1]), new Range([0, 4], [0, 5]));
    });
    it('should find refs in CR', function() {
      ripper.parse("var a;\ra = 100;");
      expectEqualRefs(ripper, new Range([0, 4], [0, 5]), new Range([1, 0], [1, 1]));
      return expectEqualRefs(ripper, new Range([1, 0], [1, 1]), new Range([0, 4], [0, 5]));
    });
    it('should find refs in CRLF', function() {
      ripper.parse("var a;\r\na = 100;");
      expectEqualRefs(ripper, new Range([0, 4], [0, 5]), new Range([1, 0], [1, 1]));
      return expectEqualRefs(ripper, new Range([1, 0], [1, 1]), new Range([0, 4], [0, 5]));
    });
    return it('should find refs in LFCR', function() {
      ripper.parse("var a;\r\na = 100;");
      expectEqualRefs(ripper, new Range([0, 4], [0, 5]), new Range([1, 0], [1, 1]));
      return expectEqualRefs(ripper, new Range([1, 0], [1, 1]), new Range([0, 4], [0, 5]));
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL1VzZXJzL2Jyb2JlcnRvLy5hdG9tL3BhY2thZ2VzL2pzLXJlZmFjdG9yL3NwZWMvcmlwcGVyLXNwZWMuY29mZmVlIgogIF0sCiAgIm5hbWVzIjogW10sCiAgIm1hcHBpbmdzIjogIkFBQUE7QUFBQSxNQUFBLHFEQUFBO0lBQUEsa0JBQUE7O0FBQUEsRUFBRSxTQUFXLE9BQUEsQ0FBUSxvQkFBUixFQUFYLE1BQUYsQ0FBQTs7QUFBQSxFQUNFLFFBQVUsT0FBQSxDQUFRLE1BQVIsRUFBVixLQURGLENBQUE7O0FBQUEsRUFFRSxVQUFZLE9BQUEsQ0FBUSxNQUFSLEVBQVosT0FGRixDQUFBOztBQUFBLEVBSUEsWUFBQSxHQUFlLFNBQUMsTUFBRCxFQUFTLEtBQVQsR0FBQTtBQUNiLFFBQUEsWUFBQTtBQUFBLElBQUEsWUFBQSxHQUFlLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBWixDQUFmLENBQUE7V0FDQSxNQUFBLENBQU8sWUFBUCxDQUNBLENBQUMsWUFERCxDQUNjLENBRGQsRUFGYTtFQUFBLENBSmYsQ0FBQTs7QUFBQSxFQVNBLGVBQUEsR0FBa0IsU0FBQSxHQUFBO0FBRWhCLFFBQUEsZ0VBQUE7QUFBQSxJQUZpQix1QkFBUSxnRUFFekIsQ0FBQTtBQUFBLElBQUEsWUFBQSxHQUFlLE1BQU0sQ0FBQyxJQUFQLENBQVksTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLEtBQXRCLENBQWYsQ0FBQTtBQUFBLElBRUEsTUFBTSxDQUFDLElBQVAsQ0FBWSxTQUFDLENBQUQsRUFBSSxDQUFKLEdBQUE7QUFDVixVQUFBLEtBQUE7QUFBQSxNQUFBLElBQWdCLENBQUMsS0FBQSxHQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBUixHQUFjLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBL0IsQ0FBQSxLQUF5QyxDQUF6RDtBQUFBLGVBQU8sS0FBUCxDQUFBO09BQUE7YUFDQSxDQUFDLENBQUMs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

//# sourceURL=/Users/broberto/.atom/packages/js-refactor/spec/ripper-spec.coffee
